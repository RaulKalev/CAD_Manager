<Window
    x:Class="CAD_Manager.CADManagerWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:CAD_Manager"
    xmlns:models="clr-namespace:CAD_Manager.Models"
    xmlns:ui="clr-namespace:CAD_Manager.UI"
    xmlns:helpers="clr-namespace:CAD_Manager.Helpers"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    Title="DWG Visibility Manager"
    Width="350"
    Height="800"
    MinWidth="350"
    MinHeight="500"
    AllowsTransparency="True"
    Background="Transparent"
    KeyDown="Window_KeyDown"
    Loaded="Window_Loaded"
    Topmost="True"
    WindowStartupLocation="Manual"
    WindowStyle="None">
    <Window.Resources>
        <!--  Include the StringToVisibilityConverter  -->
        <helpers:StringToVisibilityConverter x:Key="StringToVisibilityConverter" />
    </Window.Resources>
    <Grid Background="Transparent" ClipToBounds="True">
        <!--  Outer Border with Opacity and Blur  -->
        <Border
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="2"
            ClipToBounds="True"
            CornerRadius="10"
            Opacity="0.7"
            SnapsToDevicePixels="True">
            <Border.Effect>
                <BlurEffect KernelType="Gaussian" Radius="2" />
            </Border.Effect>
        </Border>

        <!--  Content Container (Not Affected by Opacity/Blur)  -->
        <Border
            Margin="2,2,2,2"
            Background="{DynamicResource PrimaryBackgroundBrush}"
            CornerRadius="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  Custom Title Bar  -->
                <ui:CustomTitleBar
                    Grid.Row="0"
                    Margin="0,0,0,1"
                    Foreground="{DynamicResource ForegroundBrush}" />
                <Grid
                    Grid.Row="0"
                    Grid.Column="0"
                    Margin="0,0,100,0"
                    HorizontalAlignment="Right">
                    <ToggleButton
                        x:Name="ThemeToggleButton"
                        Width="28"
                        Height="15.5"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Click="ToggleTheme_Click"
                        DockPanel.Dock="Right"
                        IsChecked="True"
                        ToolTip="Toggle Theme">

                        <ToggleButton.Template>
                            <ControlTemplate TargetType="ToggleButton">
                                <Grid Background="Transparent">
                                    <!--  Dynamic Icon Based on Toggle State  -->
                                    <materialDesign:PackIcon
                                        x:Name="ThemeToggleIcon"
                                        Width="30"
                                        Height="30"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource IconBrush}"
                                        Kind="ToggleSwitchOffOutline" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsChecked" Value="True">
                                        <Setter TargetName="ThemeToggleIcon" Property="Kind" Value="ToggleSwitchOffOutline" />
                                    </Trigger>
                                    <Trigger Property="IsChecked" Value="False">
                                        <Setter TargetName="ThemeToggleIcon" Property="Kind" Value="ToggleSwitchOutline" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                </Grid>

                <!--  Search Box with Clear Button  -->
                <Grid
                    Grid.Row="1"
                    Grid.Column="0"
                    Grid.ColumnSpan="3"
                    Width="125"
                    Margin="0,10,10,0"
                    HorizontalAlignment="Right">
                    <Border
                        Height="20"
                        Padding="5"
                        Background="{DynamicResource PrimaryBackgroundBrush}"
                        BorderBrush="Gray"
                        BorderThickness="1"
                        CornerRadius="10">
                        <Grid Margin="-6,-6,-6,-6">
                            <!--  Clear Button with Material Design Icon  -->
                            <Button
                                Width="16"
                                Height="16"
                                Margin="107,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                Background="Transparent"
                                BorderThickness="0"
                                Click="ClearButton_Click">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Grid Background="Transparent">
                                            <materialDesign:PackIcon
                                                x:Name="ClearIcon"
                                                Width="16"
                                                Height="16"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Foreground="Gray"
                                                Kind="CloseCircleOutline" />
                                        </Grid>
                                        <ControlTemplate.Triggers>
                                            <!--  Hover Effect  -->
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="ClearIcon" Property="Foreground" Value="#bebebe" />
                                            </Trigger>
                                            <!--  Pressed Effect  -->
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter TargetName="ClearIcon" Property="Foreground" Value="#000000" />
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                            <TextBox
                                x:Name="SearchBox"
                                Width="97"
                                Margin="8.2,0.5,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                Background="Transparent"
                                BorderThickness="0"
                                CaretBrush="{DynamicResource ForegroundBrush}"
                                Foreground="{DynamicResource ForegroundBrush}"
                                SelectionBrush="{DynamicResource TextHighlightBrush}"
                                Text=""
                                TextAlignment="Left"
                                TextChanged="SearchBox_TextChanged" />
                            <TextBlock
                                Width="37"
                                Margin="10,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                Foreground="Gray"
                                IsHitTestVisible="False"
                                Text="Search"
                                Visibility="{Binding Text, Converter={StaticResource StringToVisibilityConverter}, ElementName=SearchBox}" />
                        </Grid>
                    </Border>
                </Grid>

                <!--  Save and Load Buttons with Hover Effects  -->
                <StackPanel
                    Grid.Row="1"
                    Grid.RowSpan="2"
                    Height="30"
                    Margin="10,5,140,0"
                    VerticalAlignment="Top"
                    Orientation="Horizontal">
                    <!--  Save Button  -->
                    <Button
                        x:Name="SaveButton"
                        Width="20"
                        Height="23"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="SaveButton_Click"
                        RenderTransformOrigin="0.5,0.5"
                        ToolTip="Save the current layer visibility settings">
                        <Button.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform ScaleX="1.3" ScaleY="1.3" />
                                <SkewTransform />
                                <RotateTransform />
                                <TranslateTransform X="3.4" />
                            </TransformGroup>
                        </Button.RenderTransform>
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Grid Background="Transparent">
                                    <materialDesign:PackIcon
                                        x:Name="SaveIcon"
                                        Width="20"
                                        Height="20"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource IconForegroundBrush}"
                                        Kind="ContentSaveOutline" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <!--  Hover Effect  -->
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="SaveIcon" Property="Foreground" Value="{DynamicResource IconHoverBrush}" />
                                    </Trigger>
                                    <!--  Pressed Effect  -->
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="SaveIcon" Property="Foreground" Value="{DynamicResource IconPressedBrush}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Button
                        x:Name="LoadButton"
                        Width="23"
                        Height="23"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="LoadButton_Click"
                        RenderTransformOrigin="0.5,0.5"
                        ToolTip="Load a saved layer visibility template">
                        <Button.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform ScaleX="1.3" ScaleY="1.3" />
                                <SkewTransform />
                                <RotateTransform />
                                <TranslateTransform X="11" />
                            </TransformGroup>
                        </Button.RenderTransform>
                        <Button.Template>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid Background="Transparent">
                                    <materialDesign:PackIcon
                                        x:Name="LoadIcon"
                                        Width="20"
                                        Height="20"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource IconForegroundBrush}"
                                        Kind="DownloadCircleOutline" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <!--  Hover Effect  -->
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="LoadIcon" Property="Foreground" Value="{DynamicResource IconHoverBrush}" />
                                    </Trigger>
                                    <!--  Pressed Effect  -->
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="LoadIcon" Property="Foreground" Value="{DynamicResource IconPressedBrush}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Button
                        x:Name="BrowseButton"
                        Width="23"
                        Height="23"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="BrowseButton_Click"
                        RenderTransformOrigin="0.5,0.5"
                        ToolTip="Browse and select a JSON file">
                        <Button.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform ScaleX="1.3" ScaleY="1.3" />
                                <SkewTransform />
                                <RotateTransform />
                                <TranslateTransform X="19" />
                            </TransformGroup>
                        </Button.RenderTransform>
                        <Button.Template>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid Background="Transparent">
                                    <materialDesign:PackIcon
                                        x:Name="BrowseIcon"
                                        Width="20"
                                        Height="20"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource IconForegroundBrush}"
                                        Kind="FolderOpenOutline" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="BrowseIcon" Property="Foreground" Value="{DynamicResource IconHoverBrush}" />
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="BrowseIcon" Property="Foreground" Value="{DynamicResource IconPressedBrush}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <!--  Apply to Views Button  -->
                    <Button
                        x:Name="ApplyToViewsButton"
                        Width="23"
                        Height="23"
                        Margin="8,0,0,0"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="ApplyToViewsButton_Click"
                        RenderTransformOrigin="0.5,0.5"
                        ToolTip="Apply current view settings to other views">
                        <Button.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform ScaleX="1.3" ScaleY="1.3" />
                                <SkewTransform />
                                <RotateTransform />
                                <TranslateTransform X="19" />
                            </TransformGroup>
                        </Button.RenderTransform>
                        <Button.Template>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid Background="Transparent">
                                    <materialDesign:PackIcon
                                        x:Name="ApplyIcon"
                                        Width="18"
                                        Height="18"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource IconForegroundBrush}"
                                        Kind="ApplicationExport" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="ApplyIcon" Property="Foreground" Value="{DynamicResource IconHoverBrush}" />
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="ApplyIcon" Property="Foreground" Value="{DynamicResource IconPressedBrush}" />
                                    </Trigger>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter TargetName="ApplyIcon" Property="Foreground" Value="#666666" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <!--  Refresh Button  -->
                    <Button
                        x:Name="RefreshButton"
                        Width="23"
                        Height="23"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="RefreshButton_Click"
                        RenderTransformOrigin="0.5,0.5"
                        ToolTip="Refresh active view">
                        <Button.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform ScaleX="1.3" ScaleY="1.3" />
                                <SkewTransform />
                                <RotateTransform />
                                <TranslateTransform X="27" />
                            </TransformGroup>
                        </Button.RenderTransform>
                        <Button.Template>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid Background="Transparent">
                                    <materialDesign:PackIcon
                                        x:Name="RefreshIcon"
                                        Width="20"
                                        Height="20"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource IconForegroundBrush}"
                                        Kind="Refresh" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="RefreshIcon" Property="Foreground" Value="{DynamicResource IconHoverBrush}" />
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="RefreshIcon" Property="Foreground" Value="{DynamicResource IconPressedBrush}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                </StackPanel>
                <materialDesign:Card
                    Grid.Row="2"
                    Margin="10,10,10,10"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Background="Transparent"
                    BorderBrush="Gray"
                    BorderThickness="1"
                    UniformCornerRadius="0">
                    <!--  TreeView  -->
                    <TreeView
                        x:Name="DWGTreeView"
                        Grid.Row="2"
                        Grid.ColumnSpan="3"
                        Margin="0"
                        Background="{DynamicResource PrimaryBackgroundBrush}"
                        BorderBrush="Transparent"
                        Focusable="True"
                        Foreground="{DynamicResource IconBrush}"
                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                        ItemsSource="{Binding FilteredDWGNodes}"
                        PreviewMouseLeftButtonDown="TreeView_PreviewMouseLeftButtonDown">

                        <TreeView.Resources>
                            <!--  Style for Multi-Row Selection Highlighting  -->
                            <Style TargetType="TreeViewItem">
                                <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                        <Setter Property="Background" Value="{DynamicResource TextHighlightBrush}" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>

                            <!--  Custom Checkbox Style with Icons  -->
                            <Style x:Key="CustomCheckboxStyle" TargetType="CheckBox">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="CheckBox">
                                            <Border
                                                Padding="2"
                                                Background="Transparent"
                                                Cursor="Hand">
                                                <Grid>
                                                    <materialDesign:PackIcon
                                                        x:Name="CheckboxIcon"
                                                        Width="16"
                                                        Height="16"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Foreground="{DynamicResource IconBrush}"
                                                        Kind="EyeOffOutline" />
                                                </Grid>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <!--  Checked State  -->
                                                <Trigger Property="IsChecked" Value="True">
                                                    <Setter TargetName="CheckboxIcon" Property="Kind" Value="EyeOutline" />
                                                    <Setter TargetName="CheckboxIcon" Property="Foreground" Value="{DynamicResource IconBrush}" />
                                                </Trigger>
                                                <!--  Hover State  -->
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="CheckboxIcon" Property="Foreground" Value="{DynamicResource IconHoverBrush}" />
                                                    <Setter Property="Cursor" Value="Hand" />
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>


                            <!--  Template for DWGNode  -->
                            <HierarchicalDataTemplate DataType="{x:Type models:DWGNode}" ItemsSource="{Binding Layers}">
                                <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                                    <CheckBox
                                        VerticalAlignment="Center"
                                        Checked="CheckBox_Toggled"
                                        IsChecked="{Binding IsChecked}"
                                        IsThreeState="False"
                                        Style="{StaticResource CustomCheckboxStyle}"
                                        ToolTip="Toggle Visibility"
                                        Unchecked="CheckBox_Toggled" />
                                    <TextBlock
                                        Margin="2,0,5,0"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource IconBrush}"
                                        Text="{Binding Name}" />

                                    <ToggleButton
                                        Width="16"
                                        Height="16"
                                        Margin="0,0,0,0"
                                        VerticalAlignment="Center"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Checked="Halftone_Toggled"
                                        IsChecked="{Binding IsHalftone}"
                                        ToolTip="Toggle Halftone"
                                        Unchecked="Halftone_Toggled">
                                        <ToggleButton.Template>
                                            <ControlTemplate TargetType="{x:Type ToggleButton}">
                                                <Grid Background="Transparent">
                                                    <materialDesign:PackIcon
                                                        x:Name="HalftoneIcon"
                                                        Width="14"
                                                        Height="14"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Foreground="{DynamicResource IconBrush}"
                                                        Kind="CircleOutline"
                                                        Opacity="0.5" />
                                                </Grid>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsChecked" Value="True">
                                                        <Setter TargetName="HalftoneIcon" Property="Kind" Value="CircleHalfFull" />
                                                        <Setter TargetName="HalftoneIcon" Property="Opacity" Value="1.0" />
                                                    </Trigger>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="HalftoneIcon" Property="Foreground" Value="{DynamicResource IconHoverBrush}" />
                                                        <Setter TargetName="HalftoneIcon" Property="Opacity" Value="1.0" />
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </ToggleButton.Template>
                                    </ToggleButton>

                                    <Button
                                        Width="16"
                                        Height="16"
                                        Margin="5,0,0,0"
                                        VerticalAlignment="Center"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Click="TreeViewItem_EditButton_Click"
                                        Tag="{Binding}"
                                        ToolTip="Set Line Color">
                                        <Button.Template>
                                            <ControlTemplate TargetType="{x:Type Button}">
                                                <Grid Background="Transparent">
                                                    <materialDesign:PackIcon
                                                        Width="14"
                                                        Height="14"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Foreground="{DynamicResource IconBrush}"
                                                        Kind="Palette"
                                                        Opacity="0.5" />
                                                </Grid>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Cursor" Value="Hand" />
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>

                                    <!-- Spacer and Edit Button
                                <Button Content="Edit"
                        Click="TreeViewItem_EditButton_Click"
                        Tag="{Binding}"
                        Height="15"
                        Margin="5,0,0,0"
                        Padding="3,0,3,0"/>-->
                                </StackPanel>
                            </HierarchicalDataTemplate>

                            <!--  Template for LayerNode  -->
                            <DataTemplate DataType="{x:Type models:LayerNode}">
                                <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                                    <CheckBox
                                        VerticalAlignment="Center"
                                        Checked="CheckBox_Toggled"
                                        IsChecked="{Binding IsChecked}"
                                        IsThreeState="False"
                                        Style="{StaticResource CustomCheckboxStyle}"
                                        Unchecked="CheckBox_Toggled" />

                                    <TextBlock
                                        Margin="2,0,5,0"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource IconBrush}"
                                        Text="{Binding Name}" />

                                    <Button
                                        Width="16"
                                        Height="16"
                                        Margin="0,0,0,0"
                                        VerticalAlignment="Center"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Click="TreeViewItem_EditButton_Click"
                                        Tag="{Binding}"
                                        ToolTip="Set Line Color">
                                        <Button.Template>
                                            <ControlTemplate TargetType="{x:Type Button}">
                                                <Grid Background="Transparent">
                                                    <materialDesign:PackIcon
                                                        Width="14"
                                                        Height="14"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Foreground="{DynamicResource IconBrush}"
                                                        Kind="Palette"
                                                        Opacity="0.5" />
                                                </Grid>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Cursor" Value="Hand" />
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>

                                    <!-- Spacer and Edit Button
                                <Button Content="Edit"
                        Click="TreeViewItem_EditButton_Click"
                        Tag="{Binding}"
                        Height="15"
                        Margin="5,0,0,0"
                        Padding="3,0,3,0"/>-->
                                </StackPanel>
                            </DataTemplate>
                        </TreeView.Resources>
                    </TreeView>

                </materialDesign:Card>
            </Grid>
        </Border>

        <!--  Left Edge  -->
        <Border
            x:Name="LeftEdge"
            Width="5"
            HorizontalAlignment="Left"
            Background="Transparent"
            Cursor="SizeWE"
            MouseEnter="LeftEdge_MouseEnter"
            MouseLeave="Edge_MouseLeave"
            MouseLeftButtonDown="LeftEdge_MouseLeftButtonDown" />
        <!--  Right Edge  -->
        <Border
            x:Name="RightEdge"
            Width="5"
            HorizontalAlignment="Right"
            Background="Transparent"
            Cursor="SizeWE"
            MouseEnter="RightEdge_MouseEnter"
            MouseLeave="Edge_MouseLeave"
            MouseLeftButtonDown="RightEdge_MouseLeftButtonDown" />
        <!--  Bottom Edge  -->

        <Border
            x:Name="BottomEdge"
            Height="5"
            VerticalAlignment="Bottom"
            Background="Transparent"
            Cursor="SizeNS"
            MouseEnter="BottomEdge_MouseEnter"
            MouseLeave="Edge_MouseLeave"
            MouseLeftButtonDown="BottomEdge_MouseLeftButtonDown" />
        <!--  Bottom-Left Corner  -->
        <Border
            x:Name="BottomLeftCorner"
            Width="10"
            Height="10"
            HorizontalAlignment="Left"
            VerticalAlignment="Bottom"
            Background="Transparent"
            Cursor="SizeNESW"
            MouseEnter="BottomLeftCorner_MouseEnter"
            MouseLeave="Edge_MouseLeave"
            MouseLeftButtonDown="BottomLeftCorner_MouseLeftButtonDown" />
        <!--  Bottom-Right Corner  -->
        <Border
            x:Name="BottomRightCorner"
            Width="10"
            Height="10"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Background="Transparent"
            Cursor="SizeNWSE"
            MouseEnter="BottomRightCorner_MouseEnter"
            MouseLeave="Edge_MouseLeave"
            MouseLeftButtonDown="BottomRightCorner_MouseLeftButtonDown" />
    </Grid>
</Window>
